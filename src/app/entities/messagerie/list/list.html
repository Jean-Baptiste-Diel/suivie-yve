<div class="conversations-list">
  <!-- Titre principal -->
  <h3 class="list-title">Mes Conversations</h3>

  <!-- Liste des conversations -->
  @for (conv of conversations; track conv.id){
    <div class="conversation-item">
      <!-- Titre de la conversation -->
      <div class="conversation-header">
        {{ conv.titre?.trim() || 'Conversation sans titre' }}
      </div>

      <!-- Aperçu du dernier message -->
      <div class="conversation-preview">
        @if (conv.messages && conv.messages.length > 0){
        <p>
          Dernier message : {{ conv.messages[conv.messages.length - 1].content }}
        </p>
        }
        @if (!conv.messages || conv.messages.length === 0){
        <p>Aucun message</p>
        }
      </div>

      <!-- Bouton d'action -->
      <button (click)="selectConversation(conv)" class="select-btn">
        Ouvrir la conversation
      </button>
    </div>
  }
  <!-- État vide -->
  @if (!conversations || conversations.length === 0){
    <div class="no-conversations">
      Aucune conversation trouvée.
      <button (click)="loadConversations()">Recharger</button>
    </div>
  }
</div>
